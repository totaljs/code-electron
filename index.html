<!DOCTYPE html>
<html>
<head>
	<title>Total.js Remote Code Editor</title>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=11" />
	<meta name="format-detection" content="telephone=no" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<meta name="robots" content="all,follow" />
	<link href="cdn/spa.min@16.css" rel="stylesheet" type="text/css" />
	<script>if (typeof module === 'object') {window.module = module; module = undefined;}</script>
	<script src="cdn/spa.min@16.js"></script>
	<script>if (window.module) module = window.module;</script>
	<style>
		.m { margin-bottom: 10px; }
		.padding { padding: 20px; }
		.body { margin: 50px auto; max-width: 500px; width: 100%; }
		.app { font-size: 18px; cursor: pointer; border-radius: 3px; padding: 10px 20px; font-weight: bold; position: relative; }
		.app:hover { background-color: #F0F0F0; }
		.app i { margin-right: 5px; }
		.app > div { font-size: 11px; color: #A0A0A0; font-weight: normal; }
		.app .fa-times { position: absolute; right: 5px; top: 17px; font-size: 12px; color: #A0A0A0; }
		.app .fa-times:hover { color: red; }
		.body img { margin: 0 auto; display: block; }
		.center { text-align: center }
		h1 { text-align: center; margin: 20px 0 0; font-size: 18px; font-family: Arial; color: #A0A0A0; font-weight: normal; }
		.link { font-size: 12px; color: #78ae4e; }
		.link i { margin-right: 5px; }
		.button { background-color: #4285F4; border: 0; color: white; cursor: pointer; outline: 0; width: 100%; border-radius: 3px; height: 50px; text-transform: uppercase; font-family: Arial; }
		.button:hover { box-shadow: 0 2px 5px rgba(0,0,0,0.1); opacity: 0.9; }
		.button:disabled { background-color: #E0E0E0; color: silver; cursor: not-allowed; box-shadow: none; opacity: 1; }
		.button .fa, .button .fal, .button .far { margin-right: 5px; }
		.button-small { height: 32px; font-size: 12px; }
		.b { font-weight: bold; }
		.m { margin-bottom: 20px; }
	</style>
</head>
<body data-jc="exec">

	<div class="body">
		<img src="icon.png" width="150" />
		<h1>Total.js Remote Code Editor</h1>
		<div class="center"><span class="link exec" data-path="common.form" data-value="'add'"><i class="fa fa-plus-circle"></i>Add Remote Code</span></div>
		<hr />
		<div data-bind="places__template">
			<script type="text/html">
				{{ foreach m in value }}
					<div data-url="{{ m.url }}" data-index="{{ $index }}" class="app exec" data-exec="app/go"><i class="fa fa-times exec" data-exec="app/remove"></i>{{ m.name }}{{ if m.path }}<div style="margin-top:5px"><i class="fa fa-folder"></i>{{ m.path }}</div>{{ fi }}<div><i class="fa fa-globe"></i>{{ m.url }}</div></div>
				{{ end }}
			</script>
		</div>
	</div>

	<div data-jc="panel__common.form__if:add;bg:true;title:Add Code;icon:laptop-code;default:codeform.*;width:300" class="hidden">
		<div data-jc-scope="codeform" class="padding">
			<div data-jc="textbox__name__required:true__'Work'" class="m">Name</div>
			<div data-jc="textbox__url__required:true;type:url__'https://'" class="m">URL address</div>
			<div data-jc="textbox__path__placeholder:/desktop/git/__''" class="m">Path to repositories</div>
			<div data-jc="validation__?">
				<button name="submit" disabled="disabled" class="exec button button-small b" data-exec="app/submit"><i class="fa fa-plus-circle"></i>Add code</button>
			</div>
		</div>
	</div>

	<script>
		CACHEPATH('places', '20 years');

		PLUGIN('app', function(exports) {
			exports.submit = function() {
				SET('common.form', '');
				codeform.created = NOW;
				PUSH('places', codeform, true);
				DEFAULT('codeform.*');
			};

			exports.remove = function(el, e) {
				e.stopPropagation();
				e.preventDefault();
				var index = +el.parent().attrd('index');
				places.splice(index, 1);
				UPDATE('places');
			};

			exports.go = function(el) {
				var project = places[+el.attrd('index')];
				project.path && require('electron').ipcRenderer.send('setPath', { url: project.url, path: project.path });
				location.href = el.attrd('url');
			};
		});

	</script>

</body>
</html>